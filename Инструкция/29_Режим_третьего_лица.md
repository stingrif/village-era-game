# 29. –†–µ–∂–∏–º –æ—Ç —Ç—Ä–µ—Ç—å–µ–≥–æ –ª–∏—Ü–∞ (3rd Person View)

---

## –û–±–∑–æ—Ä

–¢–∏–≥—Ä–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ –≤–∏–¥–∞:

| –†–µ–∂–∏–º | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `top` | –ò–∑–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–∞ –¥–µ—Ä–µ–≤–Ω–∏ —Å–≤–µ—Ä—Ö—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |
| `third` | –†–µ–∂–∏–º –æ—Ç 3-–≥–æ –ª–∏—Ü–∞: –∫–∞–º–µ—Ä–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º, WASD-–¥–≤–∏–∂–µ–Ω–∏–µ, HUD, —Å–∫–∏–ª–ª—ã |

---

## –¢–µ—Å—Ç-—Ä–µ–∂–∏–º vs Premium

- **–°–µ–π—á–∞—Å**: `viewModeTest = true` ‚Äî –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ **–≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**
- **–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏**: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `viewModeTest = false`, –ø—Ä–æ–≤–µ—Ä—è—Ç—å `hasSubscription` –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å: –∫–Ω–æ–ø–∫–∞ –≤ —à–∞–ø–∫–µ –≤–∫–ª–∞–¥–∫–∏ ¬´–î–µ—Ä–µ–≤–Ω—è¬ª ‚Äî **3D** / **MAP**

```javascript
// –í–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤:
// main.js ‚Üí data()
viewModeTest: false,
hasSubscription: false,  // —á–∏—Ç–∞—Ç—å –∏–∑ tg_init_data / API –ø—Ä–æ—Ñ–∏–ª—è

// –õ–æ–≥–∏–∫–∞: canToggleViewMode()
canToggleViewMode() {
  return this.viewModeTest || this.hasSubscription;
}
```

---

## HUD (—ç–ª–µ–º–µ–Ω—Ç—ã —ç–∫—Ä–∞–Ω–∞ –≤ 3-–º –ª–∏—Ü–µ)

| –≠–ª–µ–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| ‚ù§Ô∏è HP bar | –ü–æ–ª–æ—Å–∞ –∑–¥–æ—Ä–æ–≤—å—è (100 / 100) |
| üíß Mana bar | –ü–æ–ª–æ—Å–∞ –º–∞–Ω—ã (50 / 50), –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è +5 –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫ |
| ‚öîÔ∏è Q ‚Äî –ê—Ç–∞–∫–∞ | cd 2 —Å–µ–∫, —Å—Ç–æ–∏–º–æ—Å—Ç—å 10 –º–∞–Ω—ã |
| üíö E ‚Äî –õ–µ—á–µ–Ω–∏–µ | cd 8 —Å–µ–∫, —Å—Ç–æ–∏–º–æ—Å—Ç—å 15 –º–∞–Ω—ã, +30 HP |
| üí® R ‚Äî –†—ã–≤–æ–∫ | cd 5 —Å–µ–∫, —Å—Ç–æ–∏–º–æ—Å—Ç—å 8 –º–∞–Ω—ã |
| –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | N/S/E/W –Ω–∞–¥ —Å–ø—Ä–∞–π—Ç–æ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ |
| –õ–æ–≥ –±–æ—è | –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 –¥–µ–π—Å—Ç–≤–∏–π |

---

## WASD-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```
W / ‚Üë   ‚Äî —à–∞–≥ –Ω–∞ —Å–µ–≤–µ—Ä (tileX - 1)
S / ‚Üì   ‚Äî —à–∞–≥ –Ω–∞ —é–≥    (tileX + 1)
A / ‚Üê   ‚Äî —à–∞–≥ –Ω–∞ –∑–∞–ø–∞–¥ (tileY - 1)
D / ‚Üí   ‚Äî —à–∞–≥ –Ω–∞ –≤–æ—Å—Ç–æ–∫(tileY + 1)
Q       ‚Äî –ê—Ç–∞–∫–∞ (skill)
E       ‚Äî –õ–µ—á–µ–Ω–∏–µ (skill)
R       ‚Äî –†—ã–≤–æ–∫ (skill)
```

–ö–ª–∏–∫ –ø–æ —Ç–∞–π–ª—É ‚Äî –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ –∫–ª–∏–∫.

---

## –§–æ—Ä–º–∞—Ç—ã —Å–ø—Ä–∞–π—Ç–æ–≤ (–¥–ª—è —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤)

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö PNG-—Å–ø—Ä–∞–π—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö PIXI.Graphics:

```
public/assets/characters/
  <race>/
    idle/  idle_N_000.png ... idle_N_007.png   (8 –∫–∞–¥—Ä–æ–≤, 64√ó64px)
           idle_S_000.png ... idle_S_007.png
           idle_E_000.png ... idle_E_007.png
           idle_W_000.png ... idle_W_007.png
    walk/  walk_N_000.png ... walk_N_007.png
    attack/attack_N_000.png ...
```

–ú–∞–Ω–∏—Ñ–µ—Å—Ç –∞–Ω–∏–º–∞—Ü–∏–∏ (`character_animations.json`):
```json
{
  "idle": { "frames": 8, "fps": 8, "dirs": ["N","S","E","W"] },
  "walk": { "frames": 8, "fps": 12 },
  "attack": { "frames": 6, "fps": 16 }
}
```

---

## –í–∫–ª—é—á–µ–Ω–∏–µ Premium (–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞)

1. –ü–æ–ª—É—á–∏—Ç—å `has_subscription` –∏–∑ Telegram WebApp data (–∏–ª–∏ –∏–∑ `/api/profile`)
2. –í `main.js` ‚Üí `mounted()`: `this.hasSubscription = tgUser.has_subscription ?? false`
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `viewModeTest = false` –≤ `data()`
