# Скрытый квест «БУКВЫ / ФЕНИКС»

## Где появляется

1. **Инвентарь → Реликвии → Сжечь** — при сжигании реликвии выдаётся **буква** (добавляется в инвентарь как предмет `item_type='letter'`, символ в `meta`).
2. **Инвентарь → Буквы** — экран квеста: подсказка загаданного слова, список своих букв, сбор слова и отправка.
3. **Профиль** — бейдж «Букварь» (если игрок вошёл в топ-5 по загаданному слову); участие в ежемесячном призе.

## Механика

- **Источник букв:** только инвентарь пользователя. Буквы хранятся как предметы (`user_items`, `item_type='letter'`, символ в `meta.symbol`). Получаются при сжигании реликвий.
- **Ввод слова = сжигание букв.** Игрок собирает слово из своих букв (клик по буквам) и отправляет. При отправке **буквы, входящие в слово, списываются из инвентаря** (удаляются). Повторяющиеся буквы в слове требуют соответствующего количества букв в инвентаре (например, для «ФЕНИКС» — Ф, Е, Н, И, К, С по одной).
- **Бейдж «Букварь».** За успешную сдачу загаданного слова в топ-5 выдаётся бейдж (сохраняется в профиле/state), отображается в Профиле.
- **5 победителей на слово.** На каждое загаданное слово приз получают только **первые 5 игроков**, правильно сдавших это слово. После 5 сдач слово закрывается, призы по нему больше не начисляются.
- **Смена загаданного слова.** Новое загаданное слово объявляется **после того, как предыдущее отгадано** (после 5-й правильной сдачи). Очередность: слово_1 → 5 победителей → слово_2 → 5 победителей → …
- **Приз в конце месяца.** Бейдж «Букварь» (и/или факт участия в отгадывании) даёт право на участие в **ежемесячном призе** (логика и начисление — отдельно; в визуале отображаются бейдж и текст про «приз в конце месяца»).

## После 50 сжиганий

- Опыт за одно сжигание уменьшается вдвое (как и раньше).

## UI

- **Не делать** отдельной кнопки «Квест» в главном меню — доступ через Инвентарь → Буквы.
- AfterBurnModal: «Реликвия сожжена», «Буква добавлена в инвентарь (квест ФЕНИКС)» при игре с сервером.
- Экран квеста: подсказка (например, первая буква слова), счётчик сдач (X/5), поле собранного слова, кнопки букв из инвентаря, «Сбросить», «Отправить слово».
- Профиль: при наличии бейджа — блок «Бейдж «Букварь» — участие в ежемесячном призе».

## Бэкенд (кратко)

- Хранить текущее загаданное слово, счётчик сдач по этому слову (кап 5), при необходимости историю слов.
- При сдаче: проверить наличие букв в инвентаре пользователя; списать буквы; проверить совпадение с загаданным словом; если верно и сдача в топ-5 — начислить награду и выдать бейдж «Букварь»; если сдач стало 5 — перейти к следующему слову.
- API: получение текущего слова (или подсказки), получение букв пользователя, отправка слова (список списываемых `letter` item_id в порядке букв), результат (успех/неуспех, бейдж, место в топ-5).
