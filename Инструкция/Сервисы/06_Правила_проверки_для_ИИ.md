# Правила проверки для ИИ (обязательны к исполнению)

Этот документ задаёт **обязательный** порядок работы ассистента при внесении изменений в код и документацию. Игнорирование этих правил не допускается.

---

## 1. Перед правками

- Прочитать затронутые файлы и убедиться, что понимаешь контекст и зависимости.
- Проверить существующий код на ошибки и несовместимости в той области, которую собираешься менять.
- Сверяться с [05_Правила_разработки.md](05_Правила_разработки.md) и с контрактами сервисов [01–04](00_Оглавление.md): не нарушать границы сервисов и правила кода.

---

## 2. После каждой правки

- **Запустить релевантные тесты** для изменённого кода (модуль, API, интеграционные тесты — в зависимости от того, что затронуто).
- **Убедиться, что тесты проходят.** Если тестов для изменённой области нет — выполнить ручную проверку (запуск сервиса, вызов эндпоинта) и зафиксировать результат.
- **Не переходить к следующей задаче или следующему файлу**, пока не проверено, что текущие изменения работают корректно.

---

## 3. При падении тестов или ошибках

- **Сначала исправить** причину падения (откатить некорректное изменение или дописать правку).
- Повторно запустить тесты; только после успешного прохождения продолжать работу.
- Не предлагать «следующий шаг», пока текущий шаг не верифицирован.

---

## 4. Сверка с правилами

- Периодически сверяться с [05_Правила_разработки.md](05_Правила_разработки.md): одна папка на сервис, не дублировать, разделять обязанности, не плодить файлы.
- При добавлении или изменении API сервисов — сверяться с контрактами в [02_Сервис_сессий.md](02_Сервис_сессий.md), [03_Сервис_авторизации_и_аутентификации.md](03_Сервис_авторизации_и_аутентификации.md), [04_Сервис_секретов.md](04_Сервис_секретов.md).
- При выполнении задач по фазам — сверяться с [Общий план реализации](../План/00_Общий_план_реализации.md): переход к следующей фазе только после прохождения шлюза работоспособности текущей фазы.

---

## 5. Краткая формулировка (закон)

- **После каждой правки — запуск тестов и проверка.**
- **Не переходить дальше без успешной проверки затронутого.**
- **При падении тестов — сначала исправление, затем продолжение.**

Эти правила являются законом проекта для любого ассистента (ИИ), работающего с репозиторием. Они также отражены в `.cursorrules` в корне проекта для применения в Cursor.
