# –°—Ç–∞—Ç—É—Å –∏ –∑–∞–¥–∞—á–∏

–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: —á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ, —á—Ç–æ –≤ —Ä–∞–±–æ—Ç–µ, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è. –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ —Ç–µ–∫—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞.

---

## –¢–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è (23 —Ñ–µ–≤—Ä–∞–ª—è 2026)

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2

| –ó–∞–¥–∞—á–∞ | –§–∞–π–ª |
|--------|------|
| **Responsive design**: –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω (‚â§640px) –∏ –ø–ª–∞–Ω—à–µ—Ç (‚â§1024px); scrollable nav, emoji-only –Ω–∞ ‚â§380px, bottom-sheet –º–æ–¥–∞–ª—å, touch-friendly (min 36px), viewport-fit=cover | `deploy/tigrit_web/frontend/src/styles.css`, `index.html` |
| **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å secrets**: GET /secret?key=+X-Internal-Token; SECRET_KEYS –∏–∑ env; –ø–æ—Ä—Ç 8003; –∑–∞–¥–µ–ø–ª–æ–µ–Ω ‚úÖ | `—Å–µ—Ä–≤–∏—Å—ã/secrets/` |
| **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å auth**: POST /verify (Telegram initData HMAC-SHA256 ‚Üí user_id/401); BOT_TOKEN –∏–∑ secrets; –ø–æ—Ä—Ç 8001 ‚úÖ | `—Å–µ—Ä–≤–∏—Å—ã/auth/` |
| **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å sessions**: create/refresh/invalidate/validate; Redis TTL 24—á; –ø–æ—Ä—Ç 8002 ‚úÖ | `—Å–µ—Ä–≤–∏—Å—ã/sessions/` |
| **docker-compose fix**: —É–±—Ä–∞–Ω—ã –ø—É—Å—Ç—ã–µ env-overrides; –¥–æ–±–∞–≤–ª–µ–Ω TELEGRAM_BOT_TOKEN –≤ –±—ç–∫–µ–Ω–¥/.env | `deploy/docker-compose.149.yml` |
| **verify_after_deploy.sh**: +6 –ø—Ä–æ–≤–µ—Ä–æ–∫ (secrets/auth/sessions health + functional) ‚Äî 17/17 OK | `deploy/verify_after_deploy.sh` |
| **Plan updated**: —Ñ–∞–∑—ã 0‚Äì6.1 –æ—Ç–º–µ—á–µ–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏; –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —à–ª—é–∑—ã | `–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è/–ü–ª–∞–Ω/00_–û–±—â–∏–π_–ø–ª–∞–Ω_—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.md` |

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏ ‚Äî –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ

| –ó–∞–¥–∞—á–∞ | –§–∞–π–ª |
|--------|------|
| **Admin API**: GET/PATCH /api/admin/village, /api/admin/user, /api/admin/users?search=, /api/admin/village/1/activate, GET /api/admin/status | `deploy/tigrit_api/backend/admin_routes.py` |
| **viewMode**: –∫–Ω–æ–ø–∫–∞ TOP‚Üî3RD –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º (—Ç–µ—Å—Ç-—Ä–µ–∂–∏–º), WASD –¥–≤–∏–∂–µ–Ω–∏–µ, –º–∞–Ω–∞, –∫—É–ª–¥–∞—É–Ω—ã, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ | `deploy/tigrit_web/frontend/src/main.js` |
| **–ö–∞—Ä—Ç–∞ –¥–µ—Ä–µ–≤–Ω–∏**: initVillageScene –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –±–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–∫–∏ | `main.js` ‚Üí `mounted()` |
| **Editor API Key**: –∫–Ω–æ–ø–∫–∞ ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞—Ä—Ç—É¬ª disabled –±–µ–∑ –∫–ª—é—á–∞, confirm-–¥–∏–∞–ª–æ–≥, editorSaving state | `index.html`, `main.js` |
| **GET /api/zones**: 6 —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω —Å fallback –∏–∑ tigrit_interactions | `deploy/tigrit_api/backend/main.py` |
| **POST /api/chat/message**: –≤–∞–ª–∏–¥–∞—Ü–∏—è, INSERT, rate limit 30/min, graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–µ –ë–î | `main.py` |
| **SQL-–º–∏–≥—Ä–∞—Ü–∏–∏**: 001_tigrit_village_extend.sql (name/xp/population_max), 002_tigrit_interactions_ensure.sql | `deploy/tigrit_api/backend/migrations/` |
| **run_migrations.py**: –∞–≤—Ç–æ-–∑–∞–ø—É—Å–∫ –∏–∑ lifespan() –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ tigrit-api | `backend/run_migrations.py` |
| **–õ–∞—Å—Ç–∏–∫ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ**: –∫–Ω–æ–ø–∫–∞ üßπ, editorTool==='erase', —Å—á—ë—Ç—á–∏–∫ —Ç–∞–π–ª–æ–≤ | `index.html`, `main.js` |
| **–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞**: debounce 300–º—Å –ø–æ username, –º–∏–Ω–∏-–∫–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ | `index.html`, `main.js` |
| **–ë–∞–Ω–Ω–µ—Ä API**: ‚ö†Ô∏è –ø—Ä–∏ –æ—à–∏–±–∫–µ fetchVillageData + –∫—ç—à –≤ localStorage | `index.html`, `main.js` |
| **fix: sys.path –≤ Docker**: `/app/backend` –¥–æ–±–∞–≤–ª–µ–Ω –≤ sys.path ‚Üí ImportError admin_router —É—Å—Ç—Ä–∞–Ω—ë–Ω | `main.py` |
| **read.py**: COALESCE(name,'–¢–∏–≥—Ä–∏—Ç'), fallback SELECT –±–µ–∑ –Ω–æ–≤—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ | `tigrit_shared/read.py` |
| **write.py**: MissingColumnError ‚Üí 422 —Å hint –ø—Ä–æ –º–∏–≥—Ä–∞—Ü–∏—é | `tigrit_shared/write.py` |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: 29_–†–µ–∂–∏–º_—Ç—Ä–µ—Ç—å–µ–≥–æ_–ª–∏—Ü–∞.md, 30_Admin_API_–¢–∏–≥—Ä–∏—Ç.md, –æ–±–Ω–æ–≤–ª—ë–Ω 00_–û–ì–õ–ê–í–õ–ï–ù–ò–ï.md | `–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è/` |

### Runbook –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. `docker exec <tigrit-api> python3 backend/run_migrations.py` ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
2. `curl -H "X-Admin-Key: KEY" https://tigrit.stakingphxpw.com/api/admin/status` ‚Üí `200 {"db_connected":true}`
3. –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä ‚Üí –≤–∫–ª–∞–¥–∫–∞ ¬´–î–µ—Ä–µ–≤–Ω—è¬ª ‚Äî –∫–∞—Ä—Ç–∞ —Ä–∏—Å—É–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
4. –í–∫–ª–∞–¥–∫–∞ ¬´–ê–¥–º–∏–Ω¬ª ‚Üí —Ñ–æ—Ä–º–∞ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è, –∫–Ω–æ–ø–∫–∏ disabled –±–µ–∑ –∫–ª—é—á–∞
5. –†–µ–¥–∞–∫—Ç–æ—Ä ‚Üí –∫–Ω–æ–ø–∫–∞ üßπ –õ–∞—Å—Ç–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å—á—ë—Ç—á–∏–∫ —Ç–∞–π–ª–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

---

## –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### –ò–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ (–ø–ª–∞–Ω ¬´–º–∞—Ä–∫–µ—Ç, –∞—Ç–∞–∫–∏, –ø–µ—á–∫–∏, —Ñ–∞–º–∏–ª—å—è—Ä—ã, –ª–æ–≥–∏¬ª)

| –ó–∞–¥–∞—á–∞ | –ì–¥–µ –æ–ø–∏—Å–∞–Ω–æ |
|--------|-------------|
| –ú–∞–≥–∞–∑–∏–Ω –∏–∑ –∫–∞–∑–Ω—ã (shop_offers, –ø–æ–∫—É–ø–∫–∞ –∑–∞ COINS/STARS) | [11_–†—ã–Ω–æ–∫_–∏_P2P.md](11_–†—ã–Ω–æ–∫_–∏_P2P.md), [18_Dev](18_Dev_—Ç–∞–±–ª–∏—Ü—ã_–∏_—Ñ–æ—Ä–º—É–ª—ã.md) |
| –í–∏–∑–∏—Ç—ã –∏ –∞—Ç–∞–∫–∏ (–ø–æ–ª–µ —Ü–µ–ª–∏, –æ–≥—Ä–∞–±–ª–µ–Ω–∏–µ –¥–æ 2 –ø–æ—Å—Ç—Ä–æ–µ–∫, –∫—É–ª–¥–∞—É–Ω—ã, –ª–æ–≥–∏, –∑–∞—â–∏—Ç–∞ —ç—Ä—ã, –ø—Ä–µ–¥–º–µ—Ç ¬´–∏—Å—Ç–æ—Ä–∏—è –∏–≥—Ä—ã¬ª) | [26_–í–∏–∑–∏—Ç—ã_–∏_–∞—Ç–∞–∫–∏.md](26_–í–∏–∑–∏—Ç—ã_–∏_–∞—Ç–∞–∫–∏.md) |
| –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞ –ø–æ –∑–¥–∞–Ω–∏—è–º, —Å–±–æ—Ä (building_pending_income, field/collect) | [18_Dev](18_Dev_—Ç–∞–±–ª–∏—Ü—ã_–∏_—Ñ–æ—Ä–º—É–ª—ã.md) |
| –®–∞—Ö—Ç–∞: –¥—Ä–æ–ø STARS 1‚Äì5000, –¥—Ä–æ–ø –ø–µ—á–µ–∫ (6 —Ü–≤–µ—Ç–æ–≤), –±–æ–Ω—É—Å –¥–æ–Ω–∞—Ç–∞ –Ω–∞ —É–ª—É—á—à–µ–Ω–Ω—É—é –ø–µ—á–∫—É | [03_–®–∞—Ö—Ç–∞_–∏_—è–π—Ü–∞.md](03_–®–∞—Ö—Ç–∞_–∏_—è–π—Ü–∞.md) |
| –ü–µ—á–∫–∏ –ø–æ —Ü–≤–µ—Ç—É, –≤—ã–ª—É–ø–ª–µ–Ω–∏–µ (1 –ø–µ—á–∫–∞ + 3 —è–π—Ü–∞ / 1 —Ä–µ–¥–∫–æ–µ), —Ñ–∞–º–∏–ª—å—è—Ä—ã, –ø—É–ª –∏—Å—Ö–æ–¥–æ–≤ (egg_hatch_pool) | [27_–ü–µ—á–∫–∏_–∏_—Ñ–∞–º–∏–ª—å—è—Ä—ã.md](27_–ü–µ—á–∫–∏_–∏_—Ñ–∞–º–∏–ª—å—è—Ä—ã.md) |
| –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è: –∞–ø–≥—Ä–µ–π–¥ –ø–µ—á–∫–∏ (2 –ø–µ—á–∫–∏ + —Ä–µ–∫–ª–∞–º–∞ + –ø—Ä–µ–¥–º–µ—Ç) | [27_–ü–µ—á–∫–∏_–∏_—Ñ–∞–º–∏–ª—å—è—Ä—ã.md](27_–ü–µ—á–∫–∏_–∏_—Ñ–∞–º–∏–ª—å—è—Ä—ã.md) |
| –î–æ–ª–∏ –ø—É–ª–∞ —à–∞—Ö—Ç–∞/–º–∞–≥–∞–∑–∏–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ | [07_–≠–∫–æ–Ω–æ–º–∏–∫–∞_–∏_–ø—É–ª—ã.md](07_–≠–∫–æ–Ω–æ–º–∏–∫–∞_–∏_–ø—É–ª—ã.md) |
| –ë–î: shop_offers, visit_log, building_pending_income, rob_cooldown, familiars_def, user_familiars, egg_hatch_pool, furnace_bonus_until | [18_Dev](18_Dev_—Ç–∞–±–ª–∏—Ü—ã_–∏_—Ñ–æ—Ä–º—É–ª—ã.md) |

### –§–∞–∑–∞ 0 (—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è, –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

| –ó–∞–¥–∞—á–∞ | –ì–¥–µ |
|--------|-----|
| API POST /api/game/mine/dig ‚Äî –≤ –æ—Ç–≤–µ—Ç–µ –ø–æ–ª–µ opened_cells (–∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å e2e-—Ç–µ—Å—Ç–æ–º) | core/checkin_mine.py |
| –í—Å–µ —Ç–µ—Å—Ç—ã –±—ç–∫–µ–Ω–¥–∞ –∑–µ–ª—ë–Ω—ã–µ, –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π (PytestReturnNotNoneWarning, test_withdraw_request_stub 403) | tests/test_game_api_e2e.py |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏: health, config, checkin, mine (smoke) | pytest smoke-–Ω–∞–±–æ—Ä |
| –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –ü–ª–∞–Ω/00_–û–±—â–∏–π_–ø–ª–∞–Ω_—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.md, —Å—Å—ã–ª–∫–∞ –≤ 00_–û–ì–õ–ê–í–õ–ï–ù–ò–ï | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è/–ü–ª–∞–Ω |

### –§–∞–∑—ã 5‚Äì6 (–¢–∏–≥—Ä–∏—Ç: tigrit_shared, –≤–µ–±-API, –¥–µ–ø–ª–æ–π)

| –ó–∞–¥–∞—á–∞ | –ì–¥–µ |
|--------|-----|
| tigrit_shared: db.py (–ø—É–ª asyncpg), read.py (get_village_row, get_top_users, get_recent_events) | –∫–∞–±–∑–¥–∞/tigrit_shared |
| –ë–æ—Ç –¢–∏–≥—Ä–∏—Ç: –ø—É–ª –∏ —á—Ç–µ–Ω–∏–µ —á–µ—Ä–µ–∑ tigrit_shared; db_async ‚Äî ensure_user, ensure_tigrit_profile, –∑–∞–ø–∏—Å—å | –∫–∞–±–∑–¥–∞/tigrit_village, deploy/tigrit_bot |
| –í–µ–±-API –¢–∏–≥—Ä–∏—Ç: async, PostgreSQL —á–µ—Ä–µ–∑ tigrit_shared; /api/village, /api/users, /api/events, /api/health | –∫–∞–±–∑–¥–∞/tigrit_web/backend, deploy/tigrit_api |
| –§—Ä–æ–Ω—Ç –¢–∏–≥—Ä–∏—Ç: API_URL = /api (–∏–ª–∏ VITE_API_BASE) | –∫–∞–±–∑–¥–∞/tigrit_web/frontend |
| –î–µ–ø–ª–æ–π: tigrit_api, tigrit_web (Dockerfile), docker-compose, nginx server tigrit.stakingphxpw.com | deploy/tigrit_api, deploy/tigrit_web, docker-compose.149.yml, nginx-docker.conf, README_DOCKER_149.md |
| –í–µ–±-–∫–ª–∏–µ–Ω—Ç –¢–∏–≥—Ä–∏—Ç: –≤–∫–ª–∞–¥–∫–∏ –î–µ—Ä–µ–≤–Ω—è, –ò–≥—Ä–æ–∫–∏, –°–æ–±—ã—Ç–∏—è, **–ú–∏—Ä (–∑–æ–Ω—ã)**, **–û–±—â–µ–Ω–∏–µ (—á–∞—Ç + XP –ø–æ –∑–æ–Ω–∞–º)**, **üéí –ü—Ä–µ–¥–º–µ—Ç—ã**, –†–µ–¥–∞–∫—Ç–æ—Ä, –ö–æ–º–∞–Ω–¥—ã | deploy/tigrit_web/frontend/index.html |
| –ü—Ä–æ–∫–∞—á–∫–∞ –∑–∞ –æ–±—â–µ–Ω–∏–µ: XP = –±–∞–∑–∞ √ó –º–Ω–æ–∂–∏—Ç–µ–ª—å –∑–æ–Ω—ã; —É—Ä–æ–≤–Ω–∏ 1‚Äì21+; —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage | deploy/tigrit_web/frontend/src/main.js |
| –°–∏—Å—Ç–µ–º–∞ –∑–æ–Ω (–æ—Ç–∫—Ä—ã—Ç—ã–π –º–∏—Ä): –∑–æ–Ω—ã = Telegram-—á–∞—Ç—ã —Å –±–æ—Ç–æ–º; –∫–∞—Ä—Ç–∞ –∑–æ–Ω; XP-–º–Ω–æ–∂–∏—Ç–µ–ª—å –Ω–∞ –∑–æ–Ω—É | deploy/tigrit_web/frontend/src/ |
| –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ): –≤–∫–ª–∞–¥–∫–∏ –¢–∏–≥—Ä–∏—Ç, –ó–æ–Ω—ã –º–∏—Ä–∞, –ü—Ä–æ–∫–∞—á–∫–∞, –î–µ—Ä–µ–≤–Ω—è, –ò–≤–µ–Ω—Ç—ã, –ö–æ–º–∞–Ω–¥—ã | deploy/tigrit_web/frontend/index.html |
| GET /api/health: –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∂–∏–≤—É—á–µ—Å—Ç–∏ API –≤–æ —Ñ—Ä–æ–Ω—Ç–µ | deploy/tigrit_api/backend/main.py |
| E2E —Ç–µ—Å—Ç /api/health: status==200, –ø–æ–ª–µ ¬´status¬ª=¬´ok¬ª | audit/e2e/test_tigrit_api.py |

### –ï–¥–∏–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–µ–¥–º–µ—Ç–æ–≤

| –ó–∞–¥–∞—á–∞ | –ì–¥–µ |
|--------|-----|
| **items-catalog.json** ‚Äî 122 –ø—Ä–µ–¥–º–µ—Ç–∞ —Å —á–∏—Å–ª–æ–≤—ã–º–∏ `stat`; –≤–∏–∑—É–∞–ª/–∞–Ω–∏–º–∞—Ü–∏—è ‚Äî –≤ [19_–°–ø–∏—Å–æ–∫_–ø—Ä–µ–¥–º–µ—Ç–æ–≤.md](19_–°–ø–∏—Å–æ–∫_–ø—Ä–µ–¥–º–µ—Ç–æ–≤.md) | deploy/tigrit_api/backend/data/items-catalog.json |
| **GET /api/items-catalog** ‚Äî –µ–¥–∏–Ω—ã–π endpoint –¥–ª—è Tigrit web –∏ Village Era; —á–∏—Å–ª–æ–≤—ã–µ `stat` –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫-–æ–ø–∏—Å–∞–Ω–∏–π | deploy/tigrit_api/backend/main.py |
| –í–∫–ª–∞–¥–∫–∞ ¬´üéí –ü—Ä–µ–¥–º–µ—Ç—ã¬ª –≤ Tigrit web: —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ slot_type –∏ rarity, –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ —Å—Ç–∞—Ç-–±–µ–π–¥–∂–∞–º–∏ | deploy/tigrit_web/frontend/index.html, src/main.js, src/styles.css |
| Village Era: –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ ‚Äî game API ‚Üí tigrit API ‚Üí data/items-catalog.json ‚Üí inline fallback | village-era-game-final.html |
| –§–∏–∫—Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∫–∞—Ä—Ç—ã –¢–∏–≥—Ä–∏—Ç: saveMap() ‚Üí PUT /api/map + –æ–±—Ä–∞–±–æ—Ç–∫–∞ 401 (Editor API Key) | deploy/tigrit_web/frontend/src/main.js |

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –¥–µ–ø–ª–æ–π

| –ó–∞–¥–∞—á–∞ | –ì–¥–µ |
|--------|-----|
| CORS –Ω–∞ –æ—Ç–≤–µ—Ç–∞—Ö 500 + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (main.py) | –±—ç–∫–µ–Ω–¥/api/main.py |
| CORS –¥–ª—è Telegram (web.telegram.org, t.me) | –±—ç–∫–µ–Ω–¥/api/main.py |
| –î–µ–ø–ª–æ–π –Ω–∞ stakingphxpw.com: config.js, .env CORS, nginx | [../deploy/README.md](../deploy/README.md) |
| –†–∞–∑–¥–∞—á–∞ —Å –ü–ö: nginx + uvicorn, certbot | [../deploy/RUN_FROM_PC.md](../deploy/RUN_FROM_PC.md) |
| Docker: –æ–¥–∏–Ω `docker compose up` ‚Äî —Å–∞–π—Ç + API (nginx + app) | [../–±—ç–∫–µ–Ω–¥/docker/README.md](../–±—ç–∫–µ–Ω–¥/docker/README.md) |
| –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (?tg= –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ ID) | –ò–≥—Ä–∞/test.html |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ–µ –∑–∞–≥—Ä—É–∑–∫–∏ API –≤ –∏–≥—Ä–µ | village-era-game-final.html |

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∏ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| [00_–û–ì–õ–ê–í–õ–ï–ù–ò–ï.md](00_–û–ì–õ–ê–í–õ–ï–ù–ò–ï.md) | –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—É–Ω–∫—Ç—ã 26, 27; –¥–∏–∞–ø–∞–∑–æ–Ω 01‚Äì28 |
| [11_–†—ã–Ω–æ–∫_–∏_P2P.md](11_–†—ã–Ω–æ–∫_–∏_P2P.md) | –†–∞–∑–¥–µ–ª ¬´–ü–æ–∫—É–ø–∫–∞ –∏–∑ –∫–∞–∑–Ω—ã¬ª, —Å—Å—ã–ª–∫–∞ –Ω–∞ 18_Dev |
| [03_–®–∞—Ö—Ç–∞_–∏_—è–π—Ü–∞.md](03_–®–∞—Ö—Ç–∞_–∏_—è–π—Ü–∞.md) | –î—Ä–æ–ø —Ç–æ–∫–µ–Ω–æ–≤, –ø–µ—á–µ–∫, –≤—ã–ª—É–ø–ª–µ–Ω–∏–µ –≤ –ø–µ—á–∫–µ, —Ñ–∞–º–∏–ª—å—è—Ä—ã |
| [07_–≠–∫–æ–Ω–æ–º–∏–∫–∞_–∏_–ø—É–ª—ã.md](07_–≠–∫–æ–Ω–æ–º–∏–∫–∞_–∏_–ø—É–ª—ã.md) | –î–æ–ª–∏ –ø—É–ª–∞ —à–∞—Ö—Ç–∞/–º–∞–≥–∞–∑–∏–Ω |
| [18_Dev_—Ç–∞–±–ª–∏—Ü—ã_–∏_—Ñ–æ—Ä–º—É–ª—ã.md](18_Dev_—Ç–∞–±–ª–∏—Ü—ã_–∏_—Ñ–æ—Ä–º—É–ª—ã.md) | –¢–∞–±–ª–∏—Ü—ã shop_offers, visit_log, building_pending_income, rob_cooldown, familiars_def, user_familiars, egg_hatch_pool; user_profile.last_collected_at, furnace_bonus_until |
| [19_–°–ø–∏—Å–æ–∫_–ø—Ä–µ–¥–º–µ—Ç–æ–≤.md](19_–°–ø–∏—Å–æ–∫_–ø—Ä–µ–¥–º–µ—Ç–æ–≤.md) | –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–º–µ—Ç–∫–∞: —á–∏—Å–ª–æ–≤—ã–µ —Å—Ç–∞—Ç—ã –≤ items-catalog.json; –¥–æ–±–∞–≤–ª–µ–Ω egg_fire |
| [25_–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.md](25_–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.md) | –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –¢–∏–≥—Ä–∏—Ç: –≤–∫–ª–∞–¥–∫–∞ –ü—Ä–µ–¥–º–µ—Ç—ã, GET /api/items-catalog |
| [26_–í–∏–∑–∏—Ç—ã_–∏_–∞—Ç–∞–∫–∏.md](26_–í–∏–∑–∏—Ç—ã_–∏_–∞—Ç–∞–∫–∏.md) | **–ù–æ–≤—ã–π** ‚Äî –≤–∏–∑–∏—Ç—ã, –∞—Ç–∞–∫–∞, –æ–≥—Ä–∞–±–ª–µ–Ω–∏–µ, –∫—É–ª–¥–∞—É–Ω—ã, –ª–æ–≥–∏, –∑–∞—â–∏—Ç–∞, –ø—Ä–µ–¥–º–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ |
| [27_–ü–µ—á–∫–∏_–∏_—Ñ–∞–º–∏–ª—å—è—Ä—ã.md](27_–ü–µ—á–∫–∏_–∏_—Ñ–∞–º–∏–ª—å—è—Ä—ã.md) | **–ù–æ–≤—ã–π** ‚Äî –ø–µ—á–∫–∏, –≤—ã–ª—É–ø–ª–µ–Ω–∏–µ, —Ñ–∞–º–∏–ª—å—è—Ä—ã, –∞–ø–≥—Ä–µ–π–¥ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π, –¥–æ–Ω–∞—Ç-–±–æ–Ω—É—Å |

### –§–∞–π–ª—ã –≤–Ω–µ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–¥–µ–ø–ª–æ–π, Docker)

| –ü—É—Ç—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| –ò–≥—Ä–∞/deploy/README.md | –ß–µ–∫-–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è stakingphxpw.com, nginx, SSL, Telegram Web App, –¢–∏–≥—Ä–∏—Ç |
| –ò–≥—Ä–∞/deploy/nginx-stakingphxpw.conf | Nginx –¥–ª—è –¥–æ–º–µ–Ω–∞ (—Å–µ—Ä–≤–µ—Ä) |
| –ò–≥—Ä–∞/deploy/nginx-from-pc.conf | Nginx –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Å –ü–ö (–ø—É—Ç—å –∫ –ò–≥—Ä–∞ –Ω–∞ Mac) |
| –ò–≥—Ä–∞/deploy/RUN_FROM_PC.md | –ü–æ—à–∞–≥–æ–≤–æ: nginx + certbot —Å —ç—Ç–æ–≥–æ –ü–ö |
| –ò–≥—Ä–∞/–±—ç–∫–µ–Ω–¥/docker/docker-compose.yml | app + web (nginx) + redis + postgres (profile db) |
| –ò–≥—Ä–∞/–±—ç–∫–µ–Ω–¥/docker/Dockerfile.backend | –û–±—Ä–∞–∑ –±—ç–∫–µ–Ω–¥–∞ (uvicorn) |
| –ò–≥—Ä–∞/–±—ç–∫–µ–Ω–¥/docker/nginx.conf | Nginx –≤ Docker: —Å—Ç–∞—Ç–∏–∫–∞ + /api ‚Üí app:8000 |
| –ò–≥—Ä–∞/test.html | –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –≤—ã–±–æ—Ä–æ–º Telegram ID |
| –ò–≥—Ä–∞/config.js | GAME_API_BASE –¥–ª—è stakingphxpw.com (–∏–ª–∏ localhost) |

---

## –í —Ä–∞–±–æ—Ç–µ / –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ

- –û—Ç–∫—Ä—ã—Ç–∏–µ –∏–≥—Ä—ã –≤ Telegram Web App –ø–æ https://stakingphxpw.com (DNS ‚Üí 87.70.179.193, —Ä–æ—É—Ç–µ—Ä ‚Üí 192.168.1.247, Docker –Ω–∞ –ü–ö).
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: HTTPS —á–µ—Ä–µ–∑ certbot –Ω–∞ –ü–ö (—Å–º. RUN_FROM_PC.md).

---

## –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

- –£—Ç–æ—á–Ω–µ–Ω–∏–µ —Ü–µ–Ω –∏ –±–∞–ª–∞–Ω—Å–∞: –ø—Ä–µ–¥–º–µ—Ç –∑–∞—â–∏—Ç—ã —ç—Ä—ã, ¬´–∏—Å—Ç–æ—Ä–∏—è –∏–≥—Ä—ã¬ª, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–∞ (shop_offers).
- –ü–µ—Ä–µ–Ω–æ—Å —Ä–∞–∑–¥–∞—á–∏ —Å –ü–ö –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (—Ç–µ –∂–µ –∫–æ–Ω—Ñ–∏–≥–∏ nginx + –±—ç–∫–µ–Ω–¥, —Å–º–µ–Ω–∞ –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤ –∏ –ø—É—Ç–∏ root).
- –î–æ–ø. –ø—Ä–∞–≤–∫–∏ –ø–æ –ª–æ–≥–∞–º 500 (–ø—Ä–∏—á–∏–Ω–∞ –≤ –ë–î/—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏) ‚Äî –ø–æ –ª–æ–≥–∞–º –±—ç–∫–µ–Ω–¥–∞ –ø–æ—Å–ª–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è.
- GET /api/zones –Ω–∞ –±—ç–∫–µ–Ω–¥–µ –¢–∏–≥—Ä–∏—Ç (—Å–µ–π—á–∞—Å —Ñ—Ä–æ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å mock-–¥–∞–Ω–Ω—ã–º–∏ –∑–æ–Ω).
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–∏—Å–ª–æ–≤—ã—Ö `stat` –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω—ã–µ –∏–≥—Ä–æ–≤—ã–µ —Ä–∞—Å—á—ë—Ç—ã –±—ç–∫–µ–Ω–¥–∞ Village Era.

---

## –ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª

–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –µ—ë –≤ –±–ª–æ–∫ ¬´–í—ã–ø–æ–ª–Ω–µ–Ω–æ¬ª –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ ¬´–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∏ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã¬ª. –¢–µ–∫—É—â–∏–µ —Ä–∞–±–æ—Ç—ã ‚Äî –≤ ¬´–í —Ä–∞–±–æ—Ç–µ¬ª. –ü–ª–∞–Ω—ã ‚Äî –≤ ¬´–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è¬ª.
